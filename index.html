<html>
<head>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="tab-container">
    <button class="tab-button active" data-demo="falling-blocks">Falling Blocks</button>
    <button class="tab-button" data-demo="folding-ball">Folding Ball</button>
</div>

<canvas id="falling-blocks-canvas" class="active"></canvas>
<canvas id="folding-ball-canvas"></canvas>

<script type="module">
    import { initFallingBlocks } from './js/demos/falling-blocks.js';
    import { initFoldingBall } from './js/demos/folding-ball.js';

    const CANVAS_SIZE = 900;
    const DEMOS = [
        {
            id: 'falling-blocks',
            canvas: document.getElementById('falling-blocks-canvas'),
            init: initFallingBlocks,
            active: false
        },
        {
            id: 'folding-ball',
            canvas: document.getElementById('folding-ball-canvas'),
            init: initFoldingBall,
            active: false
        }
    ];

    // Initialize the first demo
    const firstDemo = DEMOS[0];
    firstDemo.instance = firstDemo.init(DEMOS[0].canvas, CANVAS_SIZE);
    firstDemo.active = true;

    // Handle tab switching
    document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
            const demoId = button.dataset.demo;

            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.toggle('active', btn === button);
            });

            DEMOS.forEach(demo => {
                const isActive = demoId === demo.id;
                demo.canvas.classList.toggle('active', isActive);

                if (isActive) {
                    if (!demo.instance) {
                        // Initialize if first time
                        demo.instance = demo.init(demo.canvas, CANVAS_SIZE);
                    } else {
                        // Resume if already initialized
                        demo.instance.resume();
                    }
                } else if (demo.instance) {
                    demo.instance.pause();
                }
                demo.active = isActive;
            });
        });
    });
</script>
</body>
</html>